"use strict";angular.module("w11k.dropdownToggle",[]),angular.module("w11k.dropdownToggle").directive("w11kDropdownToggle",["$document",function(n){var e,o=function(n){n.stopPropagation()};return{restrict:"A",controller:["$scope","$element",function(i,t){function r(n,e){var o={isPrevented:!1},t={prevent:function(){o.isPrevented=!0}};return angular.isFunction(n)&&(angular.isDefined(e)?i.$apply(function(){n(t)}):n(t)),o}function c(){t.parent().off("click",o),n.off("click",l),angular.isFunction(s)&&(s(),s=void 0)}var a=this;a.isOpen=!1;var s;a.shared={},a.open=function(c){var u=!0;if(e&&(u=e.close()),c&&(c.preventDefault(),c.stopPropagation()),a.isOpen===!1&&u){var p=r(a.shared.onOpen,c);p.isPrevented===!1&&(t.parent().addClass("open"),t.parent().on("click",o),n.on("click",l),s=i.$on("$locationChangeSuccess",function(){a.close()}),a.isOpen=!0,e=a)}return a.isOpen},a.toggle=function(){a.isOpen?a.close():a.open()};var l=function(){i.$apply(function(){a.close()})};a.close=function(n){if(a.isOpen){var o=r(a.shared.onClose,n);o.isPrevented===!1&&(t.parent().removeClass("open"),c(),a.isOpen=!1,e=null)}return!a.isOpen},i.$on("$destroy",function(){c()})}],link:function(n,e,o,i){function t(n){n.open=i.open,n.close=i.close,n.toggle=i.toggle,n.isOpen=function(){return i.isOpen}}var r=function(e){e.preventDefault(),e.stopPropagation(),n.$apply(function(){i.toggle()})};e.on("click",r),n.$on("$destroy",function(){e.off("click",r)}),o.$observe("w11kDropdownToggle",function(e){if(angular.isDefined(e)&&""!==e){var o=n.$eval(e);angular.isObject(o)&&(i.shared=o,t(o))}})}}}]);